<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/css" href="../../schema/TR-03153-1-TS.css"?>
<TestCase id="II_CNC_04" xmlns="http://bsi.bund.de/TR03153" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://bsi.bund.de/TR03153 ../../schema/TR-03153-1-TS_version-1-2-0.xsd">
  <Title>Anzahl Aufzeichnungssysteme: maximale Anzahl erreicht</Title>
  <Version>1.2.0</Version>
  <Purpose>Prüfung, ob der Wert, den die Funktionalität zur Ausgabe der Anzahl von Aufzeichnungssystemen zurückgibt, dem Wert für die aktuelle Anzahl von Aufzeichnungssystemen der TSE entspricht. Die Aufzeichnungssysteme sind hierbei aktuell an nicht beendeten Transaktionen beteiligt.

Die TSE wird von der maximalen Anzahl von Aufzeichnungssystemen, die im ICS angegeben wird, für die Protokollierung von Transaktionen verwendet. Zusätzlich wird geprüft, ob die Ausführung ohne Fehlermeldung beendet wird.</Purpose>
  <RefFunction>getCurrentNumberOfClients</RefFunction>
  <Profiles>
    <Profile>II_CURNOCLIENTS</Profile>
    <Profile>MULTI_CLIENT</Profile>
    <Profile>LIMITED_CLIENTS_TRACKED</Profile>
  </Profiles>
  <References>
    <Reference>BSI TR-03153-1</Reference>
    <Reference>BSI TR-03151-1</Reference>
  </References>
  <Preconditions>
    <Precondition>Die Technische Sicherheitseinrichtung wurde initialisiert.</Precondition>
    <Precondition>Die Zeit innerhalb des Sicherheitsmoduls wurde aktualisiert.</Precondition>
    <Precondition>Es ist ein anderer Nutzer als timeadmin von der Technischen Sicherheitseinrichtung authentifiziert.</Precondition>
    <Precondition>Die TSE wird von der maximalen Anzahl von Aufzeichnungssystemen, die im ICS angegeben wird, für die Protokollierungvon Transaktionen verwendet (es liegen also für jedes Aufzeichnungssystem offene Transaktionen vor). Diese Anzahl wird als $count festgehalten.</Precondition>
  </Preconditions>
  <TestSteps>
    <TestStep>
      <Command>Aufruf der Funktionalität zur Ausgabe der Anzahl von Aufzeichnungssystemen, die aktuell an nicht beendeten Transaktionen beteiligt sind.</Command>
      <RefFunction>getCurrentNumberOfClients</RefFunction>
      <ExpectedResults>
        <ExpectedResult>Die Ausführung wird ohne Fehlermeldung beendet.</ExpectedResult>
        <ExpectedResult>Der Rückgabewert currentNumberClients entspricht dem zuvor als $count festgehaltenen Wert.</ExpectedResult>
      </ExpectedResults>
    </TestStep>
  </TestSteps>
</TestCase>
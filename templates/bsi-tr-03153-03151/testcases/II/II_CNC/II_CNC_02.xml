<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/css" href="../../schema/TR-03153-1-TS.css"?>
<TestCase id="II_CNC_02" xmlns="http://bsi.bund.de/TR03153" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://bsi.bund.de/TR03153 ../../schema/TR-03153-1-TS_version-1-2-0.xsd">
  <Title>Anzahl Aufzeichnungssysteme: ein aktives System</Title>
  <Version>1.2.0</Version>
  <Purpose>Prüfung, ob der Wert, den die Funktionalität zur Ausgabe der Anzahl von Aufzeichnungssystemen zurückgibt, dem Wert für die aktuelle Anzahl von Aufzeichnungssystemen der TSE entspricht. Die Aufzeichnungssysteme sind hierbei aktuell an nicht beendeten Transaktionen beteiligt.

Die TSE wird von einem Aufzeichnungssystem für die Protokollierung von Transaktionen verwendet. 
Zusätzlich wird geprüft, ob die Ausführung ohne Fehlermeldung beendet wird.</Purpose>
  <RefFunction>getCurrentNumberOfClients</RefFunction>
  <Profiles>
    <Profile>II_CURNOCLIENTS</Profile>
  </Profiles>
  <References>
    <Reference>BSI TR-03153-1</Reference>
    <Reference>BSI TR-03151-1</Reference>
  </References>
  <Preconditions>
    <Precondition>Die Technische Sicherheitseinrichtung wurde initialisiert.</Precondition>
    <Precondition>Die Zeit innerhalb des Sicherheitsmoduls wurde aktualisiert.</Precondition>
    <Precondition>Es ist ein anderer Nutzer als timeadmin von der Technischen Sicherheitseinrichtung authentifiziert.</Precondition>
    <Precondition>Die TSE wird von einem Aufzeichnungssystem für die Protokollierung von Transaktionen verwendet (es liegen also für das Aufzeichnungssystem offene Transaktionen vor).</Precondition>
  </Preconditions>
  <TestSteps>
    <TestStep>
      <Command>Aufruf der Funktionalität zur Ausgabe der Anzahl von Aufzeichnungssystemen, die aktuell an nicht beendeten Transaktionen beteiligt sind.</Command>
      <RefFunction>getCurrentNumberOfClients</RefFunction>
      <ExpectedResults>
        <ExpectedResult>Die Ausführung wird ohne Fehlermeldung beendet.</ExpectedResult>
        <ExpectedResult>Der Rückgabewert currentNumberClients entspricht 1.</ExpectedResult>
      </ExpectedResults>
    </TestStep>
  </TestSteps>
</TestCase>